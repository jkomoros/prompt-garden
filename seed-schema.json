{
	"type": "object",
	"properties": {
		"version": {
			"type": "number",
			"const": 0
		},
		"seeds": {
			"type": "object",
			"additionalProperties": {
				"anyOf": [
					{
						"type": "object",
						"properties": {
							"id": {
								"type": "string",
								"pattern": "^[a-zA-Z0-9-_]*$",
								"description": "A local seed ID must just be letters, numbers, dashes, and underscores"
							},
							"description": {
								"type": "string",
								"description": "An optional description for what a seed does"
							},
							"type": {
								"type": "string",
								"const": "prompt"
							},
							"prompt": {
								"anyOf": [
									{
										"type": "object",
										"properties": {
											"packet": {
												"anyOf": [
													{
														"anyOf": [
															{
																"type": "string",
																"pattern": "^[\\w./-]+$",
																"description": "A seed packet absolute location is a local path"
															},
															{
																"type": "string",
																"format": "uri",
																"description": "A https:// or http:// absolute location"
															}
														]
													},
													{
														"type": "string",
														"pattern": "^[.]{1,2}\\/[\\w./-]+$",
														"description": "A seed packet location must be a relative path, starting with . or .."
													}
												]
											},
											"id": {
												"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/id"
											}
										},
										"required": [
											"id"
										],
										"additionalProperties": false
									},
									{
										"type": "string",
										"description": "The full prompt to be passed to the configured commpletion_model"
									}
								]
							}
						},
						"required": [
							"type",
							"prompt"
						],
						"additionalProperties": false
					},
					{
						"type": "object",
						"properties": {
							"id": {
								"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/id"
							},
							"description": {
								"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/description"
							},
							"type": {
								"type": "string",
								"const": "log"
							},
							"value": {
								"anyOf": [
									{
										"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/prompt/anyOf/0"
									},
									{
										"type": [
											"number",
											"string",
											"boolean"
										],
										"description": "The message to echo back"
									}
								]
							}
						},
						"required": [
							"type",
							"value"
						],
						"additionalProperties": false
					},
					{
						"type": "object",
						"properties": {
							"id": {
								"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/id"
							},
							"description": {
								"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/description"
							},
							"type": {
								"type": "string",
								"const": "if"
							},
							"test": {
								"anyOf": [
									{
										"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/prompt/anyOf/0"
									},
									{
										"type": [
											"number",
											"string",
											"boolean"
										],
										"description": "The value to examine"
									}
								]
							},
							"then": {
								"anyOf": [
									{
										"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/prompt/anyOf/0"
									},
									{
										"type": [
											"number",
											"string",
											"boolean"
										],
										"description": "The value to return if the value of test is truthy"
									}
								]
							},
							"else": {
								"anyOf": [
									{
										"$ref": "#/properties/seeds/additionalProperties/anyOf/0/properties/prompt/anyOf/0"
									},
									{
										"type": [
											"number",
											"string",
											"boolean"
										],
										"description": "The value to return if the value of test is falsy"
									}
								]
							}
						},
						"required": [
							"type",
							"test",
							"then",
							"else"
						],
						"additionalProperties": false
					}
				]
			},
			"propertyNames": {
				"pattern": "^[a-zA-Z0-9-_]*$"
			}
		}
	},
	"required": [
		"version",
		"seeds"
	],
	"additionalProperties": false,
	"$schema": "http://json-schema.org/draft-07/schema#"
}